{"ast":null,"code":"// Spotify.js\nconst Spotify = {\n  accessToken: null,\n  clientId: 'YOUR_CLIENT_ID',\n  redirectUri: 'YOUR_REDIRECT_URI',\n  getAccessToken() {\n    if (this.accessToken) {\n      return this.accessToken;\n    }\n    // Extract the access token from URL\n    const accessTokenMatch = window.location.href.match(/access_token=([^&]*)/);\n    const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n    if (accessTokenMatch && expiresInMatch) {\n      this.accessToken = accessTokenMatch[1];\n      const expiresIn = Number(expiresInMatch[1]);\n\n      // Clear access token after expiration\n      window.setTimeout(() => this.accessToken = \"\", expiresIn * 1000);\n      window.history.pushState(\"Access Token\", null, \"/\");\n      return this.accessToken;\n    } else {\n      const accessUrl = `https://accounts.spotify.com/authorize?client_id=${this.clientId}&response_type=token&scope=playlist-modify-public&redirect_uri=${this.redirectUri}`;\n      window.location = accessUrl;\n    }\n  },\n  async savePlaylist(playlistName, trackUris) {\n    if (!playlistName || !trackUris.length) {\n      return;\n    }\n    const accessToken = Spotify.getAccessToken();\n    const headers = {\n      Authorization: `Bearer ${accessToken}`\n    };\n\n    // Get the user's Spotify ID\n    const response = await fetch(\"https://api.spotify.com/v1/me\", {\n      headers\n    });\n    const userData = await response.json();\n    const userId = userData.id;\n\n    // Create a new playlist\n    const createPlaylistResponse = await fetch(`https://api.spotify.com/v1/users/${userId}/playlists`, {\n      headers,\n      method: \"POST\",\n      body: JSON.stringify({\n        name: playlistName,\n        description: \"Custom playlist from Jammming\"\n      })\n    });\n    const playlistData = await createPlaylistResponse.json();\n    const playlistId = playlistData.id;\n\n    // Add tracks to the playlist\n    await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks`, {\n      headers,\n      method: \"POST\",\n      body: JSON.stringify({\n        uris: trackUris\n      })\n    });\n  }\n};\nexport default Spotify;","map":{"version":3,"names":["Spotify","accessToken","clientId","redirectUri","getAccessToken","accessTokenMatch","window","location","href","match","expiresInMatch","expiresIn","Number","setTimeout","history","pushState","accessUrl","savePlaylist","playlistName","trackUris","length","headers","Authorization","response","fetch","userData","json","userId","id","createPlaylistResponse","method","body","JSON","stringify","name","description","playlistData","playlistId","uris"],"sources":["/Users/sarah/Documents/Projects/React/jammming/jammming/src/components/SaveToSpotify.js"],"sourcesContent":["// Spotify.js\nconst Spotify = {\n    accessToken: null,\n    clientId: 'YOUR_CLIENT_ID',\n    redirectUri: 'YOUR_REDIRECT_URI',\n  \n    getAccessToken() {\n      if (this.accessToken) {\n        return this.accessToken;\n      }\n      // Extract the access token from URL\n      const accessTokenMatch = window.location.href.match(/access_token=([^&]*)/);\n      const expiresInMatch = window.location.href.match(/expires_in=([^&]*)/);\n  \n      if (accessTokenMatch && expiresInMatch) {\n        this.accessToken = accessTokenMatch[1];\n        const expiresIn = Number(expiresInMatch[1]);\n  \n        // Clear access token after expiration\n        window.setTimeout(() => (this.accessToken = \"\"), expiresIn * 1000);\n        window.history.pushState(\"Access Token\", null, \"/\");\n        return this.accessToken;\n      } else {\n        const accessUrl = `https://accounts.spotify.com/authorize?client_id=${this.clientId}&response_type=token&scope=playlist-modify-public&redirect_uri=${this.redirectUri}`;\n        window.location = accessUrl;\n      }\n    },\n  \n    async savePlaylist(playlistName, trackUris) {\n      if (!playlistName || !trackUris.length) {\n        return;\n      }\n  \n      const accessToken = Spotify.getAccessToken();\n      const headers = { Authorization: `Bearer ${accessToken}` };\n  \n      // Get the user's Spotify ID\n      const response = await fetch(\"https://api.spotify.com/v1/me\", { headers });\n      const userData = await response.json();\n      const userId = userData.id;\n  \n      // Create a new playlist\n      const createPlaylistResponse = await fetch(\n        `https://api.spotify.com/v1/users/${userId}/playlists`,\n        {\n          headers,\n          method: \"POST\",\n          body: JSON.stringify({\n            name: playlistName,\n            description: \"Custom playlist from Jammming\",\n          }),\n        }\n      );\n      const playlistData = await createPlaylistResponse.json();\n      const playlistId = playlistData.id;\n  \n      // Add tracks to the playlist\n      await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks`, {\n        headers,\n        method: \"POST\",\n        body: JSON.stringify({\n          uris: trackUris,\n        }),\n      });\n    },\n  };\n  \n  export default Spotify;\n  "],"mappings":"AAAA;AACA,MAAMA,OAAO,GAAG;EACZC,WAAW,EAAE,IAAI;EACjBC,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,mBAAmB;EAEhCC,cAAcA,CAAA,EAAG;IACf,IAAI,IAAI,CAACH,WAAW,EAAE;MACpB,OAAO,IAAI,CAACA,WAAW;IACzB;IACA;IACA,MAAMI,gBAAgB,GAAGC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,sBAAsB,CAAC;IAC3E,MAAMC,cAAc,GAAGJ,MAAM,CAACC,QAAQ,CAACC,IAAI,CAACC,KAAK,CAAC,oBAAoB,CAAC;IAEvE,IAAIJ,gBAAgB,IAAIK,cAAc,EAAE;MACtC,IAAI,CAACT,WAAW,GAAGI,gBAAgB,CAAC,CAAC,CAAC;MACtC,MAAMM,SAAS,GAAGC,MAAM,CAACF,cAAc,CAAC,CAAC,CAAC,CAAC;;MAE3C;MACAJ,MAAM,CAACO,UAAU,CAAC,MAAO,IAAI,CAACZ,WAAW,GAAG,EAAG,EAAEU,SAAS,GAAG,IAAI,CAAC;MAClEL,MAAM,CAACQ,OAAO,CAACC,SAAS,CAAC,cAAc,EAAE,IAAI,EAAE,GAAG,CAAC;MACnD,OAAO,IAAI,CAACd,WAAW;IACzB,CAAC,MAAM;MACL,MAAMe,SAAS,GAAG,oDAAoD,IAAI,CAACd,QAAQ,kEAAkE,IAAI,CAACC,WAAW,EAAE;MACvKG,MAAM,CAACC,QAAQ,GAAGS,SAAS;IAC7B;EACF,CAAC;EAED,MAAMC,YAAYA,CAACC,YAAY,EAAEC,SAAS,EAAE;IAC1C,IAAI,CAACD,YAAY,IAAI,CAACC,SAAS,CAACC,MAAM,EAAE;MACtC;IACF;IAEA,MAAMnB,WAAW,GAAGD,OAAO,CAACI,cAAc,CAAC,CAAC;IAC5C,MAAMiB,OAAO,GAAG;MAAEC,aAAa,EAAE,UAAUrB,WAAW;IAAG,CAAC;;IAE1D;IACA,MAAMsB,QAAQ,GAAG,MAAMC,KAAK,CAAC,+BAA+B,EAAE;MAAEH;IAAQ,CAAC,CAAC;IAC1E,MAAMI,QAAQ,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;IACtC,MAAMC,MAAM,GAAGF,QAAQ,CAACG,EAAE;;IAE1B;IACA,MAAMC,sBAAsB,GAAG,MAAML,KAAK,CACxC,oCAAoCG,MAAM,YAAY,EACtD;MACEN,OAAO;MACPS,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBC,IAAI,EAAEhB,YAAY;QAClBiB,WAAW,EAAE;MACf,CAAC;IACH,CACF,CAAC;IACD,MAAMC,YAAY,GAAG,MAAMP,sBAAsB,CAACH,IAAI,CAAC,CAAC;IACxD,MAAMW,UAAU,GAAGD,YAAY,CAACR,EAAE;;IAElC;IACA,MAAMJ,KAAK,CAAC,wCAAwCa,UAAU,SAAS,EAAE;MACvEhB,OAAO;MACPS,MAAM,EAAE,MAAM;MACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QACnBK,IAAI,EAAEnB;MACR,CAAC;IACH,CAAC,CAAC;EACJ;AACF,CAAC;AAED,eAAenB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}