{"ast":null,"code":"var _jsxFileName = \"/Users/sarah/Documents/Projects/React/jammming/jammming/src/components/SaveToSpotify.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getSpotifyToken } from \"../spotifyAuth\";\nimport { fetchSpotifyData } from \"../spotifyApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SaveToSpotify = ({\n  playlistTracks,\n  playlistName\n}) => {\n  _s();\n  const [isSaving, setIsSaving] = useState(false);\n  const [error, setError] = useState(null);\n  const clientId = \"1840d8c49ff1481c8748e3e4188f320f\";\n  const clientSecret = \"c81dfd43be3746b894a59a9956a1247e\";\n  const accessToken = getSpotifyToken();\n\n  // Function to create a new playlist\n  const createPlaylist = async accessToken => {\n    try {\n      // Get user ID\n      const userData = await fetchSpotifyData('/me', accessToken); // Using your fetchSpotifyData function\n      const userId = userData.id;\n\n      // Create new playlist\n      const createPlaylistResponse = await fetchSpotifyData(`/users/${userId}/playlists`, accessToken, {\n        method: 'POST',\n        body: JSON.stringify({\n          name: playlistName,\n          description: 'A custom playlist from Jammming!',\n          public: true\n        })\n      });\n      const playlistId = createPlaylistResponse.id;\n\n      // Step 2: Add tracks to the newly created playlist\n      await addTracksToPlaylist(playlistId, accessToken);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error creating playlist:', err);\n    }\n  };\n\n  // Function to add tracks to the playlist\n  const addTracksToPlaylist = async (playlistId, accessToken) => {\n    try {\n      const trackUris = playlistTracks.map(track => track.uri);\n      const addTracksResponse = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          uris: trackUris // Pass the track URIs\n        })\n      });\n      if (!addTracksResponse.ok) {\n        throw new Error('Error adding tracks to playlist');\n      }\n      console.log('Tracks added successfully!');\n    } catch (err) {\n      setError(err.message);\n      console.error('Error adding tracks:', err);\n    }\n  };\n\n  // Handle the Save To Spotify button click\n  const handleSaveToSpotify = async () => {\n    setIsSaving(true);\n    setError(null);\n    try {\n      if (!accessToken) {\n        throw new Error('Failed to obtain access token');\n      }\n\n      // Step 2: Create playlist and add tracks after getting the token\n      await createPlaylist(accessToken);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error saving playlist:', err);\n    }\n    setIsSaving(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSaveToSpotify,\n      disabled: isSaving,\n      children: isSaving ? 'Saving to Spotify...' : 'Save To Spotify'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n_s(SaveToSpotify, \"okUNVmbIMr63w2X5gaeUA6+BQsI=\");\n_c = SaveToSpotify;\nexport default SaveToSpotify;\nvar _c;\n$RefreshReg$(_c, \"SaveToSpotify\");","map":{"version":3,"names":["React","useState","useEffect","getSpotifyToken","fetchSpotifyData","jsxDEV","_jsxDEV","SaveToSpotify","playlistTracks","playlistName","_s","isSaving","setIsSaving","error","setError","clientId","clientSecret","accessToken","createPlaylist","userData","userId","id","createPlaylistResponse","method","body","JSON","stringify","name","description","public","playlistId","addTracksToPlaylist","err","message","console","trackUris","map","track","uri","addTracksResponse","fetch","headers","Authorization","uris","ok","Error","log","handleSaveToSpotify","children","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","style","color","_c","$RefreshReg$"],"sources":["/Users/sarah/Documents/Projects/React/jammming/jammming/src/components/SaveToSpotify.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getSpotifyToken } from \"../spotifyAuth\";\nimport { fetchSpotifyData } from \"../spotifyApi\";\n\nconst SaveToSpotify = ({ playlistTracks, playlistName }) => {\n    const [isSaving, setIsSaving] = useState(false);\n    const [error, setError] = useState(null);\n    const clientId = \"1840d8c49ff1481c8748e3e4188f320f\"; \nconst clientSecret = \"c81dfd43be3746b894a59a9956a1247e\";\n\nconst accessToken = getSpotifyToken()\n\n  // Function to create a new playlist\n  const createPlaylist = async (accessToken) => {\n    try {\n      // Get user ID\n      const userData = await fetchSpotifyData('/me', accessToken);  // Using your fetchSpotifyData function\n      const userId = userData.id;\n\n      // Create new playlist\n      const createPlaylistResponse = await fetchSpotifyData(`/users/${userId}/playlists`, accessToken, {\n        method: 'POST',\n        body: JSON.stringify({\n          name: playlistName,\n          description: 'A custom playlist from Jammming!',\n          public: true,\n        }),\n      });\n\n      const playlistId = createPlaylistResponse.id;\n\n      // Step 2: Add tracks to the newly created playlist\n      await addTracksToPlaylist(playlistId, accessToken);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error creating playlist:', err);\n    }\n  };\n\n  // Function to add tracks to the playlist\n  const addTracksToPlaylist = async (playlistId, accessToken) => {\n    try {\n      const trackUris = playlistTracks.map((track) => track.uri);\n\n      const addTracksResponse = await fetch(`https://api.spotify.com/v1/playlists/${playlistId}/tracks`, {\n        method: 'POST',\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          uris: trackUris,  // Pass the track URIs\n        }),\n      });\n\n      if (!addTracksResponse.ok) {\n        throw new Error('Error adding tracks to playlist');\n      }\n\n      console.log('Tracks added successfully!');\n    } catch (err) {\n      setError(err.message);\n      console.error('Error adding tracks:', err);\n    }\n  };\n\n  // Handle the Save To Spotify button click\n  const handleSaveToSpotify = async () => {\n    setIsSaving(true);\n    setError(null);\n\n    try {\n    \n      if (!accessToken) {\n        throw new Error('Failed to obtain access token');\n      }\n\n      // Step 2: Create playlist and add tracks after getting the token\n      await createPlaylist(accessToken);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error saving playlist:', err);\n    }\n\n    setIsSaving(false);\n  };\n\n  return (\n    <div>\n      <button onClick={handleSaveToSpotify} disabled={isSaving}>\n        {isSaving ? 'Saving to Spotify...' : 'Save To Spotify'}\n      </button>\n\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n    </div>\n  );\n};\n\nexport default SaveToSpotify;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}